<!DOCTYPE html>
<html lang="en">
<head>
	<title>CSIS 228 Car Rental</title>
	<meta charset="utf-8">
	<script type="text/javascript">
		var today = new Date();
		var expiry = new Date(today.getTime() + 7 * 24 * 3600 * 1000);

		// Sets a cookie for each field in the reservation form and makes them expire after one week
		function setCookies(name, value)
		{
			document.cookie=name + "=" + escape(value) + "; path=/; expires=" + expiry.toGMTString();
		} // end function setCookies()

		// Stores the cookies
		function storeValues()
		{
			setCookies("txtName", frmRental.txtName.value);
			setCookies("txtAddress", frmRental.txtAddress.value);
			setCookies("txtCity", frmRental.txtCity.value);
			setCookies("txtState", frmRental.txtState.value);
			setCookies("txtZip", frmRental.txtZip.value);
			setCookies("txtEmail", frmRental.txtEmail.value);
			setCookies("txtCarType", frmRental.txtCarType.value);
			setCookies("txtPickupDate", frmRental.txtPickupDate.value);
			setCookies("txtReturnDate", frmRental.txtReturnDate.value);
			alert ("Your reservation has been saved.");
		} // end function storeValues()
		
		// Gets the cookies
		function getCookie(name)
		{
			var regex = new RegExp(name + "=([^;]+)");
			var value = regex.exec(document.cookie);
			return (value != null) ? unescape(value[1]) : null;
		} // end function getCookie()

		// Read the saved cookies and repopulates the form with the cookie values
		function displayCookies()
		{
			if (document.cookie == 0)
			{
				alert("You have not made a reservation");
			}
			else
			{
				if(txtName = getCookie("txtName")) document.frmRental.txtName.value = txtName;
				if(txtAddress = getCookie("txtAddress")) document.frmRental.txtAddress.value = txtAddress;
				if(txtCity = getCookie("txtCity")) document.frmRental.txtCity.value = txtCity;
				if(txtState = getCookie("txtState")) document.frmRental.txtState.value = txtState;
				if(txtZip = getCookie("txtZip")) document.frmRental.txtZip.value = txtZip;
				if(txtEmail = getCookie("txtEmail")) document.frmRental.txtEmail.value = txtEmail;
				if(txtCarType = getCookie("txtCarType")) document.frmRental.txtCarType.value = txtCarType;
				if(txtPickupDate = getCookie("txtPickupDate")) document.frmRental.txtPickupDate.value = txtPickupDate;
				if(txtReturnDate = getCookie("txtReturnDate")) document.frmRental.txtReturnDate.value = txtReturnDate;
			}
		} // end function displayCookies()

	
	</script>
</head>
<body>
<h1>CSIS 228 Car Rental</h1>
    <form name="frmRental" method="post">
        Name:<br>
        <input type="text" name="txtName" id="txtName" size="20" maxlength="25"><br>
        Address:<br>
        <input type="text" name="txtAddress" id="txtAddress" size="20" maxlength="25"><br>
        City:<br>
        <input type="text" name="txtCity" id="txtCity" size="20" maxlength="25"><br>
        State:<br>
        <input type="text" name="txtState" id="txtState" size="2" maxlength="2"><br>
        Zip:<br>
        <input type="text" name="txtZip" id="txtZip" size="5" maxlength="5"><br>
        E-Mail Address:<br>
        <input type="email" name="txtEmail" id="txtEmail" size="20" maxlength="25"><br>
        Car Type:<br>
        <input type="text" name="txtCarType" id="txtCarType" size="20">
        <br>
        Pickup Date:
        <br>
        <input type="date" name="txtPickupDate" id="txtPickupDate" size="10">
        <br>
        Return Date:
        <br>
        <input type="date" name="txtReturnDate" id="txtReturnDate" size="10">
        <br><br>
        <input type="button" name="btnSave" value="Save Reservation" onClick="storeValues()"> 
        <input type="reset" value="Reset Form"> 
        <input type="button" name="btnRedisplay" value="Redisplay Reservation" onClick="displayCookies()">
    </form>

</body>
</html>
